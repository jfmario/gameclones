var app=angular.module("app",[]);app.service("$$SettingsSvc",function(){this.NUMGEMTYPES=7}),app.service("$$GemSvc",["$$SettingsSvc",function(e){this.getGem=function(i,n,a){if(i>e.NUMGEMTYPES||i<=0)throw"GemIndexOutOfBounds";var r;return r=1==i?this.makeRedPentagon(n,a):2==i?this.makeGreenX(n,a):3==i?this.makeBlueTriangle(n,a):4==i?this.makeOrangeSquare(n,a):5==i?this.makeGrayCircle(n,a):6==i?this.makeYellowHex(n,a):this.makePurpleDiamond(n,a),{shape:r,type:i}},this.makeRedPentagon=function(e,i){var n=new createjs.Shape;return n.graphics.beginFill("#f00").moveTo(e+25,i+5).lineTo(e+45,i+25).lineTo(e+37,i+45).lineTo(e+13,i+45).lineTo(e+5,i+25).lineTo(e+25,i+5),n},this.makeGreenX=function(e,i){var n=new createjs.Shape;return n.graphics.beginFill("#0f0").moveTo(e+10,i+5).lineTo(e+25,i+20).lineTo(e+40,i+5).lineTo(e+45,i+10).lineTo(e+30,i+25).lineTo(e+45,i+40).lineTo(e+40,i+45).lineTo(e+25,i+30).lineTo(e+10,i+45).lineTo(e+5,i+40).lineTo(e+20,i+25).lineTo(e+5,i+10).lineTo(e+10,i+5),n},this.makeBlueTriangle=function(e,i){var n=new createjs.Shape;return n.graphics.beginFill("#00f").moveTo(e+25,i+5).lineTo(e+45,i+45).lineTo(e+5,i+45).lineTo(e+25,i+5),n},this.makeOrangeSquare=function(e,i){var n=new createjs.Shape;return n.graphics.beginFill("#f80").drawRect(e+5,i+5,40,40),n},this.makeGrayCircle=function(e,i){var n=new createjs.Shape;return n.graphics.beginFill("#888").drawCircle(e+25,i+25,20),n},this.makeYellowHex=function(e,i){var n=new createjs.Shape;return n.graphics.beginFill("#ff0").moveTo(e+13,i+5).lineTo(e+38,i+5).lineTo(e+45,i+25).lineTo(e+38,i+45).lineTo(e+13,i+45).lineTo(e+5,i+25).lineTo(e+13,i+5),n},this.makePurpleDiamond=function(e,i){var n=new createjs.Shape;return n.graphics.beginFill("#80f").moveTo(e+5,i+25).lineTo(e+25,i+5).lineTo(e+45,i+25).lineTo(e+25,i+45).lineTo(e+5,i+25),n}}]),app.directive("dirBejeweled",["$$SettingsSvc","$$GemSvc",function(e,i){"use strict";return{replace:!0,restrict:"EAC",scope:{},template:"<canvas style='display:block;padding:0;margin:auto;' width='400' height='400'></canvas>",link:function(n,a,r){function t(){n.stage?(n.stage.autoClear=!0,n.stage.removeAllChildren(),n.stage.update()):n.stage=new createjs.Stage(a[0]);for(var r=0;r<8;++r){o.push([]);for(var t=0;t<8;++t){var l=parseInt(Math.random()*e.NUMGEMTYPES)+1;o[r].push(i.getGem(l,50*r,50*t))}}for(var r=0;r<8;++r)for(var t=0;t<8;++t)n.stage.addChild(o[r][t].shape);n.stage.update()}var o=[];t()}}}]);