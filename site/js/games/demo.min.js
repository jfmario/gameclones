var app=angular.module("app",[]);app.service("$$loaderSvc",function(){var e=new createjs.LoadQueue((!0)),t=[{src:"spritesheet_grant.png",id:"grant"},{src:"sky.png",id:"sky"},{src:"ground.png",id:"ground"},{src:"hill.png",id:"hill"},{src:"hill2.png",id:"hill2"}];this.getLoader=function(){return e},this.getResult=function(t){return e.getResult(t)},this.loadAssets=function(){e.loadManifest(t,!0,"/images/demo/")}}),app.directive("dirDemoCanvas",["$$loaderSvc",function(e){"use strict";return{replace:!0,restrict:"EAC",scope:{},template:"<canvas width='960' height='400'></canvas>",link:function(t,a,i){function r(){t.stage?(t.stage.autoClear=!0,t.stage.removeAllChildren(),t.stage.update()):t.stage=new createjs.Stage(a[0]),l=t.stage.canvas.height,h=t.stage.canvas.width,e.getLoader().addEventListener("complete",s),e.loadAssets()}function s(){m=new createjs.Shape,m.graphics.beginBitmapFill(p.getResult("sky")).drawRect(0,0,h,l);var e=p.getResult("ground");d=new createjs.Shape,d.graphics.beginBitmapFill(e).drawRect(0,0,e.width,e.height),d.tileW=e.width,d.y=l-e.height,o=new createjs.Bitmap(p.getResult("hill")),o.setTransform(Math.random()*h,l-4*o.image.height-e.height,4,4),o.alpha=.5,u=new createjs.Bitmap(p.getResult("hill2")),u.setTransform(Math.random()*h,l-3*u.image.height-e.height,3,3);var a=new createjs.SpriteSheet({animations:{jump:[26,63,"run"],run:[0,25,"run",1.5]},framerate:30,frames:{count:64,height:292,width:165,regX:82,regY:0},images:[p.getResult("grant")]});c=new createjs.Sprite(a,"run"),c.y=35,t.stage.addChild(m,o,u,d,c),t.stage.addEventListener("stagemousedown",n),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",g)}function n(){c.gotoAndPlay("jump")}function g(e){var a=e.delta/1e3,i=c.x+150*a,r=c.getBounds().width*c.scaleX;c.x=i>=h+r?-r:i,d.x=(d.x-150*a)%d.tileW,o.x=o.x-30*a,o.x+o.image.width*o.scaleX<=0&&(o.x=h),u.x=u.x-45*a,u.x+u.image.width*u.scaleX<=0&&(u.x=h),t.stage.update(e)}var c,d,l,h,o,u,p,m;r()}}}]);